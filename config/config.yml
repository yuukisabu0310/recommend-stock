# 株式市場分析・銘柄選定アプリ 設定ファイル

# 対象国
countries:
  - name: "米国"
    code: "US"
    indices:
      - "SPX"  # S&P500
      - "NDX"  # NASDAQ100
    universe:
      - "S&P500"
      - "NASDAQ100"
  
  - name: "日本"
    code: "JP"
    indices:
      - "N225"  # 日経225
      - "TPX"   # TOPIX
    universe:
      - "TOPIX Core30"
      - "TOPIX Large70"
      - "TOPIX Mid400"
  
  - name: "中国"
    code: "CN"
    indices:
      - "SSE"   # 上海総合
      - "HSI"   # ハンセン指数
    universe:
      - "CSI300"

# 投資期間
timeframes:
  - name: "短期"
    code: "short"
    days: 30
    weights:
      technical: 0.5
      macro: 0.3
      supply_demand: 0.2
  
  - name: "中期"
    code: "medium"
    days: 90
    weights:
      macro: 0.4
      supply_demand: 0.3
      technical: 0.3
  
  - name: "長期"
    code: "long"
    days: 365
    weights:
      structural: 0.5
      macro: 0.3
      technical: 0.2

# おすすめ銘柄件数
recommendation_count:
  japan: 5
  us: 5

# 使用指標
indicators:
  macro:
    - "PMI"
    - "CPI"
    - "employment"
    - "GDP"
  
  financial:
    - "policy_rate"
    - "long_term_rate"
    - "credit_spread"
  
  equity:
    - "index_vs_ma200"
    - "volume"
    - "volatility"
  
  structural:
    - "top_stocks_concentration"
    - "sector_contribution"

# スコア範囲
score_range:
  min: -2
  max: 2

# スコア表示マッピング
score_labels:
  "2": "↗↗ 超強気"
  "1": "↗ やや強気"
  "0": "→ 中立"
  "-1": "↘ やや弱気"
  "-2": "↘↘ 超弱気"

# イベント検知条件
event_detection:
  concentration_risk:
    enabled: true
    threshold: 0.35  # 上位銘柄集中度が35%以上の場合は警戒
  
  volatility_spike:
    enabled: true
    threshold: 2.0   # 過去平均の2倍以上のボラティリティ
  
  macro_event:
    enabled: true
    indicators:
      - "CPI_change"
      - "policy_rate_change"

# AI設定
ai:
  enabled: false  # デフォルトで無効化（テンプレートベースの分析を使用）
  # enabled: true に設定するとOpenAI APIを使用します（APIキーが必要）
  model: "gpt-4o-mini"  # OpenAI API使用
  max_tokens: 1000
  temperature: 0.7
  
  # プロンプトテンプレート
  prompts:
    market_analysis: |
      以下の市場データを分析し、以下の4つの要素を含む評価を出力してください：
      1. 結論（3行以内）
      2. 前提（なぜそう判断したか）
      3. 最大リスク
      4. 転換シグナル
      
      投資助言や売買指示は禁止。断定的表現は避けてください。
      
      データ:
      {data}
    
    sector_analysis: |
      マクロ・地政学・政策・構造変化を元に、今後注目されやすいセクターを特定してください。
      各セクターについて以下を含めてください：
      - 注目される理由
      - 波及する分野
      - 期間（短期/中期/長期）
      
      データ:
      {data}
    
    stock_recommendation: |
      以下の条件を満たす銘柄を評価してください：
      - 銘柄名 + ティッカー
      - おすすめ順位
      - 投資期間（短期/中期/長期）
      - 割安度（定性的）
      - 注目理由（3行以内）
      - 前提条件（崩れたら見送り）
      
      投資助言や目標株価は記載しないでください。
      
      データ:
      {data}

# API設定（環境変数から読み込む）
api:
  # Alpha Vantage API (オプション)
  alpha_vantage:
    enabled: false
    key: "${ALPHA_VANTAGE_KEY}"
  
  # Yahoo Finance (無料、推奨)
  yahoo_finance:
    enabled: true
  
  # OpenAI API
  openai:
    key: "${OPENAI_API_KEY}"

# 出力設定
output:
  directory: "outputs"
  pages_directory: "docs"  # GitHub Pages用（このディレクトリが公開されます）
  markdown_file: "market-analysis.md"
  log_directory: "logs"

# エラーハンドリング
error_handling:
  use_fallback_data: true  # API失敗時は前回データを使用
  continue_on_error: true  # 処理失敗しても全体を停止させない
  max_retries: 3

